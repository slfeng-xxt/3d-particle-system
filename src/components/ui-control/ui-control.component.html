
<div class="absolute top-4 right-4 bg-gray-800/50 backdrop-blur-md p-6 rounded-lg shadow-2xl w-80 text-white font-sans border border-cyan-400/20">
  <h2 class="text-xl font-bold mb-4 text-cyan-300 tracking-wider">Controls</h2>

  <!-- Shape Buttons -->
  <div class="mb-5">
    <label class="block text-sm font-medium mb-2 text-gray-300">Shape</label>
    <div class="flex space-x-2">
      <button (click)="setShape('nebula')" [class.bg-cyan-500]="config().shape === 'nebula'" [class.bg-gray-700]="config().shape !== 'nebula'" class="flex-1 text-sm py-2 px-4 rounded-md hover:bg-cyan-600 transition-colors">
        Nebula
      </button>
      <button (click)="setShape('heart')" [class.bg-cyan-500]="config().shape === 'heart'" [class.bg-gray-700]="config().shape !== 'heart'" class="flex-1 text-sm py-2 px-4 rounded-md hover:bg-cyan-600 transition-colors">
        Heart
      </button>
    </div>
  </div>

  <!-- Particle Density Slider -->
  <div class="mb-5">
    <label for="density" class="flex justify-between text-sm font-medium text-gray-300">
      <span>Density</span>
      <span>{{ (config().particleDensity * 100).toFixed(0) }}%</span>
    </label>
    <input id="density" type="range" min="0.01" max="1" [value]="config().particleDensity" step="0.01" (input)="onDensityChange($event)" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb">
  </div>

  <!-- Diffusion Slider -->
  <div class="mb-5">
    <label for="diffusion" class="flex justify-between text-sm font-medium text-gray-300">
      <span>Diffusion</span>
      @if (!isCameraOn()) {
        <span>{{ (config().diffusion * 100).toFixed(0) }}%</span>
      } @else {
        <span class="text-cyan-400 animate-pulse">Gesture Controlled</span>
      }
    </label>
    <input id="diffusion" type="range" min="0" max="1" [value]="isCameraOn() ? handOpenness() : config().diffusion" step="0.01" (input)="onDiffusionChange($event)" [disabled]="isCameraOn()" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb" [class.opacity-50]="isCameraOn()">
  </div>

  <!-- Color Picker -->
  <div class="mb-6 flex items-center justify-between">
    <label for="color" class="text-sm font-medium text-gray-300">Particle Color</label>
    <input id="color" type="color" [value]="config().particleColor" (input)="onColorChange($event)" class="w-10 h-10 p-1 bg-gray-700 border border-gray-600 rounded-md cursor-pointer">
  </div>

  <!-- Camera Toggle Button -->
  <button (click)="toggleCamera()" class="w-full py-3 px-4 rounded-md font-semibold text-white transition-all duration-300" [class.bg-red-600]="isCameraOn()" [class.hover:bg-red-700]="isCameraOn()" [class.bg-green-600]="!isCameraOn()" [class.hover:bg-green-700]="!isCameraOn()">
    {{ isCameraOn() ? 'Stop Gesture Control' : 'Start Gesture Control' }}
  </button>
</div>
